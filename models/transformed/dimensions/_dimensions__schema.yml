version: 2
models:
  - name: dim__user
    columns:
      - name: id
        data_type: varchar
        tests:
          - relationships:
              field: id
              to: ref('raw_stellar_health_application__medical_group_user')
      - name: group_id
        data_type: varchar
        description: The unique identifier for each medical group. This is a foreign key
          that links to the 'group_id' field in the 'dim__user' table.
        tests:
          - relationships:
              field: id
              to: ref('raw_stellar_health_application__medical_group_list')
      - name: username
        data_type: varchar
        description: The username of the user in the medical group. This is a string field.
      - name: role
        data_type: varchar
        description: The role assigned to the medical group user. This determines the
          level of access and permissions the user has within the medical group.
      - name: created_date
        data_type: timestamp
      - name: last_login_date
        data_type: timestamp
        description: This column represents the last date and time when the user logged
          into the system. The data type is timestamp. If the original data is
          null, it will remain null; otherwise, it is converted from a string to
          a timestamp using the format '%Y-%m-%d %H:%M:%S.%f'.
      - name: user_role_description
        data_type: varchar
    description: "The 'dim__user' model is a transformation of the
      'raw_stellar_health_application__medical_group_user' table from the
      'stellar_health' database. It includes the following columns: 'id',
      'group_id', 'username', 'role', 'created_date', 'last_login_date', and
      'user_role_description'. The 'group_id' column is derived from the
      'medical_group_id' column in the source table. The 'user_role_description'
      column is a case statement that translates the 'role' column into a more
      descriptive format: 'Administrator' for 'admin', 'Doctor' for 'doctor',
      'Nurse' for 'nurse', and 'Other' for any other roles."
  - name: dim__group
    columns:
      - name: id
        data_type: varchar
        tests:
          - relationships:
              field: id
              to: ref('raw_stellar_health_application__medical_group_list')
      - name: name
        data_type: varchar
        description: The name of the medical group. This is derived from the 'groupname'
          column in the source data.
      - name: state
        data_type: varchar
        description: The state in which the medical group operates. This is directly
          taken from the 'state' column in the source data.
      - name: created_date
        data_type: timestamp
      - name: number_of_users
        data_type: bigint
        description: The total number of users associated with the medical group. This
          is a count of all users, regardless of their role or status.
      - name: number_of_patients
        data_type: bigint
        description: The total number of patients associated with the medical group.
          This is a count of all patients, regardless of their status.
    description: The 'dim__group' model is a transformation of the
      'raw_stellar_health_application__medical_group_list' table from the
      'stellar_health' database. It contains information about different medical
      groups, including their unique identifiers (id), names (name), states
      (state), creation dates (created_date), number of users (number_of_users),
      and number of patients (number_of_patients). The 'id' and 'name' are of
      varchar data type, 'state' is also a varchar representing the state where
      the group is located, 'created_date' is a timestamp indicating when the
      group was created, 'number_of_users' is a bigint representing the total
      number of users in the group, and 'number_of_patients' is a bigint
      representing the total number of patients in the group.
  - name: dim__patient
    columns:
      - name: id
        data_type: varchar
        tests:
          - relationships:
              field: id
              to: ref('raw_stellar_health_application__patient_demographics')
      - name: age
        data_type: bigint
        description: The age of the patient. This is directly taken from the 'age'
          column in the source data.
      - name: weight
        data_type: double
        description: The weight of the patient. This is directly taken from the 'weight'
          column in the source data.
      - name: last_visit_date
        data_type: timestamp
        description: The 'last_visit_date' column represents the date and time of the
          patient's last visit to the clinic. It is a timestamp data type. If
          the original data source has a null value for this field, it will also
          be null in this model. The date and time are formatted as '%Y-%m-%d
          %H:%M:%S.%f'.
    description: "The 'dim__patient' model is a transformation of the
      'raw_stellar_health_application__patient_demographics' table from the
      'stellar_health' database. It contains four columns: 'id', 'age',
      'weight', and 'last_visit_date'. The 'id' column is a varchar type and
      represents the unique identifier for each patient. The 'age' column is a
      bigint type and represents the age of the patient. The 'weight' column is
      a double type and represents the weight of the patient. The
      'last_visit_date' column is a timestamp type and represents the date of
      the patient's last visit to the clinic."
